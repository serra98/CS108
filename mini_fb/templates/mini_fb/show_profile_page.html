<!-- templates/show_profile_page.html-->

{% extends 'mini_fb/base.html' %}

{% block content %}
<a href = "{% url 'update_profile' profile.pk %}">Edit this profile</a> 

<center>
<h1> {{profile.first_name}} {{profile.last_name}} </h1>
<h3> {{profile.home_town}} </h3>
 <img src="{{profile.prof_url}}" style="max-width: 400;">  
</center>


<!-- {{mini_fb.profile.get_status_message}}-->

<h3> Status Messages </h3>

<ul>

        <table>
                <colgroup>
                    <col span = "1" style="width: 30%;">
                    <col span = "1" style="width: 45%;">
                    <col span = "1" style="width: 25%;">
                </colgroup>
                <tr>
                    <th>Time</th>
                    <th>Status</th>
                    <th>Person</th>
                </tr>


                {% for status in profile.get_status_messages %}
                <tr>
                    <center>
                    <td> {{status.timestamp}} </td>
                    <td> {{status.message}}</td>
                    <td> {{status.profile}} </td>
                    {% if status.image %}
                    <td><img src='{{status.image.url}}' style='max-width: 600;'></td>
                    {% endif %} 
                    </center>
                    <td> <a href = "{% url 'delete_status' profile_pk=profile.pk status_pk=status.pk %}" >Delete</a> </td>
                </tr>
                {% endfor %}
        </table>
    </ul>

    <h4>Post a status message</h4>

    <form method = 'POST' action = '/mini_fb/profile/{{profile.pk}}/post_status' enctype="multipart/form-data">
        {% csrf_token %}
        <!-- {{form}} -->
        <table>
            {% for field in create_status_form %}
            <tr>
                <th> {{field.name}}</th>
                <td> {{field}} </td>
            </tr>
            {% endfor %}
            <tr>
                <td></td>
                <td>
                    <input type = "submit" name = "share!" value ="share!">
                </td>
            </tr>
        </table>
    </form>

{% endblock %}

